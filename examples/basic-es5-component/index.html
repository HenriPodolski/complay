<!DOCTYPE html>
<html>
	<head>
		<title>Basic component - Closed conduit â˜º</title>
	</head>
	<body>
		<button data-js-module="button-component" data-js-options="{'string': 'string', 'number': 1, 'boolean': true, 'array': ['1','2','3'], 'object': {'key': 'value'}}">Say hello to conduit.js</button>
		<script src="../conduit.es5.js"></script>
		<script>
		(function() {
			
			var MessageComponent = Conduit.Component.extend({
				
				name: 'MessageComponent',

				events: {
					'click [data-js-item="restart"]': 'onButtonClick'
				},

				initialize: function() {
					console.log(this + '.initialize()');					
				},

				didMount: function() {
					Conduit.Component.prototype.didMount.call(this);
					this.render();
				},

				onButtonClick: function(evt) {
					console.log(this + '.onButtonClick()', evt, this.options);

					var button = document.createElement('button');
					button.setAttribute('data-js-module', 'button-component');
					button.setAttribute('data-js-options', '{"string": "string", "number": 1, "boolean": true, "array": ["1","2","3"], "object": {"key": "value"}}');
					button.innerHTML = 'Say hello to conduit.js';

					document.body.appendChild(button);

					this.app.destroy(this);
				},

				render: function() {
					console.log(this + '.render()');

					var html = '<p>'+ this.options.msg +'</p>';
					html += '<button data-js-item="restart">Restart</button>';

					this.el.innerHTML = html;

					return this;
				}
			});

			var ButtonComponent = Conduit.Component.extend({
				
				name: 'ButtonComponent',

				events: {
					'click': 'onClick'
				},

				initialize: function() {
					console.log(this + '.initialize()');
				},

				onClick: function() {
					console.log(this + '.onClick()', this.options);
					var div = document.createElement('div');
					div.dataset.jsModule = 'message-component';
					div.dataset.jsOptions = "{'msg': 'Hi, from conduit.js.'}";

					document.body.appendChild(div);

					this.app.destroy(this);
				}
			});

			var Application = Conduit.ApplicationFacade.extend({
				name: 'Application'
			});

			// observe true options means application watches dom changes
			// and initializes components that are already started
			window.app = new Application({observe: true});
			app.start({module: MessageComponent});
			app.start({module: ButtonComponent});
		}).call(this);
		</script>
	</body>
</html>