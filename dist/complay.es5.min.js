!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="/dist/",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var r=n(4),i=o(r),u=n(22),a=o(u),s=n(9),c=o(s),l=n(20),f=o(l),d=n(12),h=o(d),p=n(19),y=o(p),v=n(23),m=o(v),b=n(10),g=o(b),E=(0,i["default"])(),_=E.Complay||{};!E.Promise&&(E.Promise=g["default"]),_.ApplicationFacade=y["default"],_.ApplicationFacade.extend=a["default"],_.ApplicationDomComponent=m["default"],_.ApplicationDomComponent.extend=a["default"],_.Module=c["default"],_.Module.extend=a["default"],_.Service=f["default"],_.Service.extend=a["default"],_.Component=h["default"],_.Component.extend=a["default"],E.Complay=_},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="module",o="service",r="component";t.MODULE_TYPE=n,t.SERVICE_TYPE=o,t.COMPONENT_TYPE=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){Object.assign||!function(){var e=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)},t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;Object.assign=function(o,r){for(var i,u,a=e(o),s=1;s<arguments.length;s++){i=Object(arguments[s]);for(var c in i)t.call(i,c)&&(a[c]=i[c]);if(Object.getOwnPropertySymbols){u=Object.getOwnPropertySymbols(i);for(var l=0;l<u.length;l++)n.call(i,u[l])&&(a[u[l]]=i[u[l]])}}return a}}()}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){Array.from||(Array.from=function(e){return[].slice.call(e)})}.call(void 0)},function(e,t){(function(e){"use strict";function n(){return"undefined"!=typeof self?self:"undefined"!=typeof e?e:new Function("return this")()}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e._name?e._name:(0,d["default"])(e)}function u(e){return e._dashedName?e._dashedName:(0,l["default"])(i(e))}function a(e){return e._uid?e._uid:(0,p["default"])(i(e))}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(7),l=o(c),f=n(8),d=o(f),h=n(18),p=o(h),y=n(4),v=o(y),m=n(6),b=o(m),g=n(10),E=o(g),_=(0,v["default"])();!_.Promise&&(_.Promise=E["default"]);var O=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e),this.name=i(this),this.dashedName=u(this),this.uid=a(this),this.options=t,t.app&&(this.app=t.app),this.vents=t.vents||{},this.autostart=!!t.autostart,t.vent?this.vent=t.vent(this):t.app&&t.app.vent?this.vent=t.app.vent(t.app):this.vent=b["default"].vent(this)}return s(e,[{key:"vents",set:function(e){this._vents=e},get:function(){return this._vents}},{key:"autostart",set:function(e){this._autostart=e},get:function(){return this._autostart}},{key:"name",set:function(e){this._name=e},get:function(){return this._name}},{key:"dashedName",set:function(e){this._dashedName=e},get:function(){return this._dashedName}},{key:"uid",get:function(){return this._uid},set:function(e){this._uid=e}}]),s(e,[{key:"initialize",value:function(e){}},{key:"bindCustomEvents",value:function(){}},{key:"delegateVents",value:function(){if(this.vent){for(var e in this.vents)if(this.vents.hasOwnProperty(e)){var t=this.vents[e];if("function"!=typeof t&&"function"==typeof this[t])t=this[t];else if("function"!=typeof t)throw new Error("Expected callback method");this.vent.on(e,t,this)}return this}}},{key:"undelegateVents",value:function(){if(this.vent){for(var e in this.vents)if(this.vents.hasOwnProperty(e)){var t=this.vents[e];if("function"!=typeof t&&"function"==typeof this[t])t=this[t];else if("function"!=typeof t)throw new Error("Expected callback method");this.vent.off(e,t,this)}return this}}},{key:"toString",value:function(){return this.uid}}]),e}();t["default"]=O},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),i=o(r),u=n(15),a=o(u),s={vent:a["default"],dom:(0,i["default"])("dom"),template:(0,i["default"])("template")};t["default"]=s},function(e,t){"use strict";function n(e){return e.replace(/[A-Z]/g,function(e,t){return(0!==t?"-":"")+e.toLowerCase()})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e){var t=/^function ([a-zA-Z0-9_]+)\(\)/,n=t.exec(e.constructor.toString());return n&&n.length>1?n[1]:""}}.call(void 0);t["default"]=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(5),c=o(s),l=n(1),f=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.initialize(e),n.bindCustomEvents(),n.delegateVents(),n}return u(t,e),a(t,[{key:"type",get:function(){return l.MODULE_TYPE}}],[{key:"type",get:function(){return l.MODULE_TYPE}}]),t}(c["default"]);t["default"]=f},function(e,t,n){function o(e){function t(e,n,o){e&&e.then?e.then(function(e){t(e,n,o)})["catch"](function(e){t(e,o,o)}):n(e)}function n(e){a=function(t,n){try{e(t,n)}catch(o){n(o)}},c(),c=void 0}function r(e){n(function(t,n){n(e)})}function i(e){n(function(t){t(e)})}function u(e,t){var n=c;c=function(){n(),a(e,t)}}var a,s=function(){},c=s,l={then:function(e){var t=a||u;return o(function(n,o){t(function(t){n(e(t))},o)})},"catch":function(e){var t=a||u;return o(function(n,o){t(n,function(t){o(e(t))})})},resolve:function(e){!a&&t(e,i,r)},reject:function(e){!a&&t(e,r,r)}};return e&&e(l.resolve,l.reject),l}o.resolve=function(e){return o(function(t){t(e)})},o.reject=function(e){return o(function(t,n){n(e)})},o.race=function(e){return e=e||[],o(function(t,n){var o=e.length;if(!o)return t();for(var r=0;o>r;++r){var i=e[r];i&&i.then&&i.then(t)["catch"](n)}})},o.all=function(e){return e=e||[],o(function(t,n){function o(){--u<=0&&t(e)}function r(t,r){t&&t.then?t.then(function(t){e[r]=t,o()})["catch"](n):o()}var i=e.length,u=i;if(!i)return t();for(var a=0;i>a;++a)r(e[a],a)})}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n=[];return t=t||document,e===t?n=[e]:e&&e.nodeType===Node.ELEMENT_NODE?n=[e]:"string"==typeof e?n=Array.from(t.querySelectorAll(e)):e&&e.length&&Array.from(e).length>0&&(n=Array.from(e)),n}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var i=n(3);o(i)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(5),l=o(c),f=n(2),d=(o(f),n(6)),h=o(d),p=n(3),y=(o(p),n(1)),v=/^(\S+)\s*(.*)$/,m=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector,b=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,t),e.context=e.context||document;var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.moduleSelector=e.moduleSelector||"[data-js-module]",e.app||n.mount(),n}return u(t,e),s(t,[{key:"type",get:function(){return y.COMPONENT_TYPE}},{key:"events",set:function(e){this._events=e},get:function(){return this._events}},{key:"el",set:function(e){this._el=e},get:function(){return this._el}}],[{key:"type",get:function(){return y.COMPONENT_TYPE}}]),s(t,[{key:"willMount",value:function(){return!0}},{key:"mount",value:function(){this.willMount()!==!1&&(this.events=this.events||{},this.dom=this.options.dom||this.app&&this.app.dom||h["default"].dom,this.template=this.options.template||this.app&&this.app.template||h["default"].template,this._domEvents=[],this.ensureElement(this.options),"function"==typeof this.itemSelectorToMembers&&this.itemSelectorToMembers(),this.initialize(this.options),this.bindCustomEvents(),this.bindEvents(),this.delegateEvents(),this.delegateVents(),this.didMount())}},{key:"didMount",value:function(){}},{key:"willUnmount",value:function(){return!0}},{key:"unmount",value:function(){this.willUnmount()!==!1&&(this.app&&this.app.findMatchingRegistryItems().length>0?this.app.destroy(this):this.remove(),this.didUnmount())}},{key:"didUnmount",value:function(){}},{key:"createDomNode",value:function(e){var t=this.options.context.querySelector(e);if(t)return t;var n=document.createElement("div"),o=void 0;return n.innerHTML=e,Array.from(n.childNodes).forEach(function(e){o||e.nodeType!==Node.ELEMENT_NODE||(o=e)}),o||n}},{key:"ensureElement",value:function(e){if(this.el||e&&e.el)if(e.el instanceof Element)this.el=e.el;else{if("string"!=typeof e.el)throw new TypeError("Parameter options.el of type "+a(e.el)+" is not a dom element.");this.el=this.createDomNode(e.el)}else this.el=document.createElement("div");this.el.dataset.jsModule?-1===this.el.dataset.jsModule.indexOf(this.dashedName)&&(this.el.dataset.jsModule=this.el.dataset.jsModule.length>0?","+this.dashedName:""+this.dashedName):this.el.dataset.jsModule=this.dashedName,this.el.componentUid?-1===this.el.componentUid.indexOf(this.uid)&&this.el.componentUid.push(this.uid):this.el.componentUid=[this.uid],this.$el=this.dom&&this.dom(this.el)}},{key:"setElement",value:function(e){return this.undelegateEvents(),this.ensureElement({el:e}),this.delegateEvents(),this}},{key:"bindEvents",value:function(){}},{key:"delegateEvents",value:function(e){if(!e&&!(e=this.events))return this;this.undelegateEvents();for(var t in e){var n=e[t];"function"!=typeof n&&(n=this[e[t]]);var o=t.match(v);this.delegate(o[1],o[2],n.bind(this))}return this}},{key:"delegate",value:function(e,t,n){"function"==typeof t&&(n=t,t=null);var o=this.el,r=t?function(e){for(var r=e.target||e.srcElement;r&&r!=o;r=r.parentNode)m.call(r,t)&&(e.delegateTarget=r,n(e))}:n;return Element.prototype.addEventListener.call(this.el,e,r,!1),this._domEvents.push({eventName:e,handler:r,listener:n,selector:t}),r}},{key:"undelegate",value:function(e,t,n){if("function"==typeof t&&(n=t,t=null),this.el)for(var o=this._domEvents.slice(),r=o.length;r--;){var i=o[r],u=i.eventName===e&&(n?i.listener===n:!0)&&(t?i.selector===t:!0);u&&(Element.prototype.removeEventListener.call(this.el,i.eventName,i.handler,!1),this._domEvents.splice(r,1))}return this}},{key:"undelegateEvents",value:function(){if(this.el){for(var e=0,t=this._domEvents.length;t>e;e++){var n=this._domEvents[e];Element.prototype.removeEventListener.call(this.el,n.eventName,n.handler,!1)}this._domEvents.length=0}return this}},{key:"remove",value:function(){this.undelegateVents(),this.undelegateEvents(),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},{key:"update",value:function(){return this}},{key:"render",value:function(){return this}}]),t}(l["default"]);t["default"]=b},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return function(){var t=['Extension for "'+e+'" is not configured yet.\r\n',"Please pass an extensions through ApplicationFacade constructor options."+e+"\r\n","or directly through Module, Service or Component via options.app."+e+"!"];return console.warn(t.join("")),arguments[0]}}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"reduce",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=this.toArray();return n.reduce(e,t)}},{key:"filter",value:function(e){var t=this.toArray();return t.filter(e)}},{key:"where",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=[],r=[];return this.each(function(t,i){if("function"==typeof e&&e(i))r.push(t),n.push(i);else if("object"===("undefined"==typeof e?"undefined":o(e))){var u=!1;for(var a in e)i.hasOwnProperty(a)&&i[a]===e[a]&&(u=!0);u&&(r.push(t),n.push(i))}}),t?[n,r]:n}},{key:"findByIndexes",value:function(e){return isNumber(e)&&(e=[e]),ServiceReducers.filter(function(t,n){return~e.indexOf(n)})}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e){var t=[];return"undefined"!=typeof o&&e===o||(o=e||this,o.name||(o.name=Math.random()+""),r[o.name]={}),o.on=function(e,t,n){(r[o.name][e]=r[o.name][e]||[]).push([t,n])},o.off=function(e,n){e||(r[o.name]={});for(var i=r[o.name][e]||t,u=i.length=n?i.length:0;u--;)n==i[u][0]&&i.splice(u,1)},o.trigger=function(e){for(var n,i=r[o.name][e]||t,u=0;n=i[u++];)n[0].apply(n[1],t.slice.call(arguments,1))},o}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n;var o=void 0,r={}},function(e,t){"use strict";function n(e){return e&&"object"===("undefined"==typeof e?"undefined":o(e))?e instanceof Array||0===e.length||"number"==typeof e.length&&e.length>0&&e.length-1 in e:!1}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t["default"]=n},function(e,t){"use strict";function n(e,t){for(var n=+t.length,o=0,r=e.length;n>o;o++)e[r++]=t[o];return e.length=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(8),u=o(i),a=function(){var e={};return function(t){var n=void 0;return"object"===("undefined"==typeof t?"undefined":r(t))&&(n=(0,u["default"])(t)),n=t,e[n]?e[n]++:e[n]=1,n+"-"+e[n]}}.call(void 0);t["default"]=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(9),l=o(c),f=n(1),d=n(4),h=o(d),p=n(3),y=(o(p),n(2)),v=(o(y),n(7)),m=o(v),b=n(11),g=o(b),E=(0,h["default"])(),_=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n._modules=[],n.vent=e.vent,n.dom=e.dom,n.template=e.template,e.AppComponent&&(n.appComponent=new e.AppComponent(Object.assign(e,{app:n,context:e.context||document,moduleSelector:n.moduleSelector||"[data-js-module]"}))),e.modules&&n.start.apply(n,e.modules),n}return u(t,e),s(t,[{key:"getModuleInstanceByName",value:function(e,t){var n=this.findMatchingRegistryItems(e);return isNaN(t)?n.map(function(e){return e.module}):n[t]&&n[t].module?n[t].module:void 0}},{key:"modules",get:function(){return this._modules}}]),s(t,[{key:"findMatchingRegistryItems",value:function(e){return"*"===e?this._modules:this._modules.filter(function(t){return t===e||t.module===e||"string"==typeof e&&t.module.type===e||"string"==typeof e&&t.module.name===e||"object"===("undefined"==typeof e?"undefined":a(e))&&e.uid&&t.instances.indexOf(e)>-1?t:void 0})}},{key:"immediate",value:function(e){return e.call(this),this}},{key:"onDomReady",value:function(e){return!E.document||E.document&&"interactive"===E.document.readyState?e.call(this):document.addEventListener("DOMContentLoaded",e.bind(this),!1),this}},{key:"onWindowLoaded",value:function(e){return!E.document||E.document&&"complete"===E.document.readyState?e.call(this):E.addEventListener("load",e.bind(this),!1),this}},{key:"start",value:function(){for(var e=this,t=arguments.length,n=Array(t),o=0;t>o;o++)n[o]=arguments[o];if(n.length>1)return void n.forEach(function(t){e.start(t)});var r=n[0],i={};return Object.getPrototypeOf(r)===Object.prototype&&r.module&&(i=r.options||{},r=r.module),this.startModules(r,i)}},{key:"stop",value:function(){for(var e=this,t=arguments.length,n=Array(t),o=0;t>o;o++)n[o]=arguments[o];if(n.length>1)return void n.forEach(function(t){e.stop(t)});var r=n[0];this.findMatchingRegistryItems(r).forEach(function(e){var t=e.module;e.instances.forEach(function(e){t.type===f.COMPONENT_TYPE?e.undelegateEvents():t.type===f.SERVICE_TYPE&&e.disconnect(),e.undelegateVents()}),e.running=!1})}},{key:"startModules",value:function(e,t){if(t.app=t.app||this,e.type===f.COMPONENT_TYPE)this.startComponents(e,t);else if(e.type===f.SERVICE_TYPE)this.startService(e,t);else{if(e.type!==f.MODULE_TYPE)throw new Error("Expected Module of type \n				"+f.COMPONENT_TYPE+", "+f.SERVICE_TYPE+" or "+f.MODULE_TYPE+", \n				Module of type "+e.type+" is not allowed.");this.startModule(e,t)}var n=this._modules[this._modules.length-1];return n.running=!0,n}},{key:"startModule",value:function(e,t){var n=new e(t);this.initModule(n),this.register(e,n,t)}},{key:"startComponents",value:function(e,t){var n=this,o=[];!e.name&&e.prototype._name&&(e.es5name=e.prototype._name),o=(0,g["default"])(t.el),0===o.length&&(this.appComponent.elements=t,o=this.appComponent.newElements);var r=!1;o.forEach(function(o){var i=e.name||e.es5name;i&&-1!==o.dataset.jsModule.indexOf((0,m["default"])(i))&&(n.startComponent(e,t,o),r=!0)}),r||this.register(e)}},{key:"startComponent",value:function(e,t,n){t.el=n,t=Object.assign(this.parseOptions(t.el,e),t),t.app=t.app||this,t.moduleSelector=t.moduleSelector||this.options.moduleSelector;var o=new e(t);this.initComponent(o),this.register(e,o,t)}},{key:"startService",value:function(e,t){var n=new e(t);this.initService(n),this.register(e,n,t)}},{key:"parseOptions",value:function(e,t){var n=e&&e.dataset.jsOptions;if(n&&"string"==typeof n){var o=t.name||t.es5name;n=n.replace(/\\'/g,"'").replace(/'/g,'"'),n=JSON.parse(n),n=n[(0,m["default"])(o)]||n[o]||n}return n||{}}},{key:"initModule",value:function(e){if(e.type!==f.MODULE_TYPE)throw new Error("Expected Module instance.");e.delegateVents()}},{key:"initService",value:function(e){if(e.type!==f.SERVICE_TYPE)throw new Error("Expected Service instance.");e.delegateVents(),e.connect(),e.autostart&&e.fetch()}},{key:"initComponent",value:function(e){if(e.type!==f.COMPONENT_TYPE)throw new Error("Expected Component instance.");e.mount(),e.autostart&&e.render()}},{key:"register",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(0===arguments.length)throw new Error("Module or module identifier expected");var o=this.findMatchingRegistryItems(e)[0];if(o){var r=this._modules.indexOf(o);o.appName&&!this[n.appName]&&t&&(this[n.appName]=t),t&&-1===this._modules[r].instances.indexOf(t)&&this._modules[r].instances.push(t)}else if([f.SERVICE_TYPE,f.COMPONENT_TYPE,f.MODULE_TYPE].indexOf(e.type)>-1){var i={type:e.type,module:e,instances:t?[t]:[],autostart:!!e.autostart,running:!1,uid:e.uid};n.appName&&!this[n.appName]&&i.instances.length>0?(i.appName=n.appName,this[n.appName]=i.instances[0]):n.appName&&console.error("appName "+n.appName+" is already defined."),this._modules.push(i)}else console.error("Expected Module of type \n				"+f.COMPONENT_TYPE+", "+f.SERVICE_TYPE+" or "+f.MODULE_TYPE+", \n				Module of type "+e.type+" cannot be registered.")}},{key:"destroy",value:function(){for(var e=this,t=arguments.length,n=Array(t),o=0;t>o;o++)n[o]=arguments[o];if(n.length>1)return void n.forEach(function(t){e.destroy(t)});var r=n[0],i=!("object"!==("undefined"==typeof r?"undefined":a(r))||!r.uid);this.findMatchingRegistryItems(r);this.findMatchingRegistryItems(r).forEach(function(t){var n=t.module,o=i?[r]:t.instances;o.forEach(function(o){var r=e._modules[e._modules.indexOf(t)].instances;r.length>1?e._modules[e._modules.indexOf(t)].instances.splice(r.indexOf(o),1):(e._modules[e._modules.indexOf(t)].instances=[],t.appName&&e[t.appName]&&delete e[t.appName]),n.type===f.COMPONENT_TYPE?o.unmount():n.type===f.SERVICE_TYPE?(o.undelegateVents(),o.disconnect(),o.destroy()):o.undelegateVents()})}),i||this.unregister(r)}},{key:"unregister",value:function(e){for(var t=this.findMatchingRegistryItems(e),n=0,o=t.length;o>n;n++){var r=t[n];this._modules.length>1?this._modules.splice(this._modules.indexOf(r),1):this._modules=[]}}}]),t}(l["default"]);t["default"]=_},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(o=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);o=!0);}catch(s){r=!0,i=s}finally{try{!o&&a["return"]&&a["return"]()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(5),f=o(l),d=n(14),h=o(d),p=n(2),y=(o(p),n(16)),v=o(y),m=n(17),b=o(m),g=n(1),E=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));n.length=0,n.resource=e.resource||n,n.data={};var o=["reduce","filter","where","findByIndexes"];for(var u in o)n.data[o[u]]=h["default"][o[u]].bind(n);return n.lastCommitId=null,n.commitIds=[],n.repository={},e.data&&n.merge(e.data),n.initialize(e),n.bindCustomEvents(),n.delegateVents(),n}return u(t,e),c(t,[{key:"type",get:function(){return g.SERVICE_TYPE}},{key:"resource",set:function(e){this._resource=e},get:function(){return this._resource}}],[{key:"type",get:function(){return g.SERVICE_TYPE}}]),c(t,[{key:"fallback",value:function(){return this}},{key:"commit",value:function(e){return e&&(this.repository[e]=this.toArray(),this.lastCommitId=e,this.commitIds.push(e)),this}},{key:"resetRepos",value:function(){return this.lastCommitId=null,this.commitIds=[],this.repository={},this}},{key:"rollback",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.lastCommitId:arguments[0];return e&&this.repository[e]&&(this.reset(),this.create(this.repository[e])),this}},{key:"each",value:function(e,t){"function"==typeof e&&(t=e,e=this);var n=(0,v["default"])(e),o=void 0,r=0;if(n)for(var i=e.length;i>r&&(o=t.call(e[r],r,e[r]),o!==!1);r++);return this}},{key:"connect",value:function(){var e=this.options.strategy&&this.options.strategy.connect||this.fallback;return e.apply(this,arguments)}},{key:"disconnect",value:function(){var e=this.options.strategy&&this.options.strategy.disconnect||this.fallback;return e.apply(this,arguments)}},{key:"fetch",value:function(){var e=this.options.strategy&&this.options.strategy.fetch||this.fallback;return e.apply(this,arguments)}},{key:"parse",value:function(e){var t=this.options.strategy&&this.options.strategy.parse||this.fallback;return t.apply(this,arguments)}},{key:"then",value:function(e){return e(this.toArray()),this}},{key:"catch",value:function(){return this}},{key:"merge",value:function(e){return(0,v["default"])(e)?(0,b["default"])(this,e):e&&this.add(e),this}},{key:"replace",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{data:[]}:arguments[0];if(e.data instanceof Array||(e.data=[e.data]),e.end=e.end||this.length,!isNaN(e.start)&&e.start<=e.end)for(var t=e.start,n=0;t<=e.end&&e.data[n];)this[t]=e.data[n],t++,n++;return this}},{key:"insert",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{data:[],replace:0}:arguments[0];if(e.data instanceof Array||(e.data=[e.data]),!isNaN(e.start)){var t=this.toArray();Array.prototype.splice.apply(t,[e.start,e.replace].concat(e.data)),this.reset(),this.create(t)}return this}},{key:"create",value:function(e){return this.merge(e),this}},{key:"update",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];return t=t instanceof Array?t:t?[t]:[],t.forEach(function(t){if(!isNaN(t.index)&&e[t.index])e[t.index]=t.to;else if(t.where){var n=e.data.where(t.where,!0),o=s(n,2),r=(o[0],o[1]);r.forEach(function(n){var o=t.to&&!(t.to instanceof Array)&&"object"===a(t.to)&&e[n]&&!(e[n]instanceof Array)&&"object"===a(e[n]),r=t.to instanceof Array&&e[n]instanceof Array;r?Array.prototype.splice.apply(e[n],[0,t.to.length].concat(t.to)):o?e[n]=Object.assign(e[n],t.to):e[n]=t.to})}}),this}},{key:"add",value:function(e){return e&&(this[this.length++]=e),this}},{key:"reset",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this:arguments[0];return this.each(e,function(t){delete e[t]}),e.length=0,this}},{key:"toArray",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this:arguments[0],t=[];return e instanceof Array?e:(this.each(e,function(n){t.push(e[n])}),t)}},{key:"toDataString",value:function(){return JSON.stringify(this.toArray())}},{key:"remove",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1],n=this.toArray();return n.splice(e,t),this.reset(),this.create(n),this}},{key:"save",value:function(){var e=this.options.strategy&&this.options.strategy.save||this.fallback;return e.apply(this,arguments)}}]),t}(f["default"]);t["default"]=E},function(e,t){"use strict";function n(e){for(var t=[],n=0,o=e.length;o>n;n++)-1===t.indexOf(e[n])&&""!==e[n]&&t.push(e[n]);return t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n,o=this;n=e&&Object.hasOwnProperty.call(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},o.type&&(n.type=o.type),Object.assign(n,o,t);var r=function(){this.constructor=n};return r.prototype=o.prototype,n.prototype=new r,e&&Object.assign(n.prototype,e),n.__super__=o.prototype,n}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var i=n(2);o(i)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(12),c=o(s),l=n(1),f=n(11),d=o(f),h=n(21),p=o(h),y=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return e.observe&&n.observe(e),n}return u(t,e),a(t,[{key:"elements",set:function(e){var t=this,n=[],o=[];this._elements=this._elements||[],this._newElements=[],this.options.context&&!e.context?(e.context=this.options.context,n=(0,d["default"])(this.options.context)):this.options.context===e.context?n=(0,d["default"])(this.options.context):this.options.context.contains(e.context)?n=(0,d["default"])(e.context,this.options.context):(0,d["default"])(e.context).forEach(function(e){var t=document.createDocumentFragment();
t.appendChild(e),n.push(t)}),n.forEach(function(e){o=Array.from(e.querySelectorAll(t.options.moduleSelector)),t._newElements=o,t._elements=(0,p["default"])(t._elements.concat(o))})},get:function(){return this._elements}},{key:"newElements",get:function(){return this._newElements}}]),a(t,[{key:"observe",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n={attributes:!0,childList:!0,characterData:!0},o=this.options.context;o.contains(document.body)&&(o=document.body),n=Object.assign(t.config||{},n),window.MutationObserver?(this.observer=new MutationObserver(function(t){t.forEach(function(t){"childList"===t.type&&t.addedNodes.length>0?e.onAddedNodes(t.addedNodes):"childList"===t.type&&t.removedNodes.length>0&&e.onRemovedNodes(t.removedNodes)})}),this.observer.observe(o,n)):(this.onAddedNodesCallback=function(t){e.onAddedNodes(t.target)},this.onRemovedNodesCallback=function(t){e.onRemovedNodes(t.target)},o.addEventListener("DOMNodeInserted",this.onAddedNodesCallback,!1),o.addEventListener("DOMNodeRemoved",this.onRemovedNodesCallback,!1))}},{key:"onAddedNodes",value:function(e){var t=this;this.options.app.findMatchingRegistryItems(l.COMPONENT_TYPE).forEach(function(n){var o=n.module;(0,d["default"])(e).forEach(function(e){console.log("CONTEXT",e),e.nodeType===Node.ELEMENT_NODE&&e.dataset.jsModule?t.options.app.startComponents(o,{context:e.parentElement}):e.nodeType===Node.ELEMENT_NODE&&t.options.app.startComponents(o,{context:e})})})}},{key:"onRemovedNodes",value:function(e){var t=this,n=this.app.findMatchingRegistryItems(l.COMPONENT_TYPE),o=[];(0,d["default"])(e).forEach(function(e){e.dataset.jsModule&&o.push(e),(0,d["default"])(e.querySelectorAll("[data-js-module]")).forEach(function(e){e.dataset.jsModule&&o.push(e)})}),n.forEach(function(e){e.instances.forEach(function(e){o.indexOf(e.el)>-1&&t.app.destroy(e)})})}},{key:"stopObserving",value:function(){if(window.MutationObserver)this.observer.disconnect();else{var e=this.options.context||document.body;e.removeEventListener("DOMNodeInserted",this.onAddedNodesCallback),e.removeEventListener("DOMNodeRemoved",this.onRemovedNodesCallback)}}}]),t}(c["default"]);t["default"]=y}]);
//# sourceMappingURL=complay.es5.min.js.map